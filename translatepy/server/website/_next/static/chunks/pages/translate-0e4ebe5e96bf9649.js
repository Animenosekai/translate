(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{5524:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/translate",function(){return t(5923)}])},5923:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return translate}});var n=t(5893);let getLanguageName=(e,a)=>e?a.foreign&&e.foreign?e.foreign[a.foreign]:e.name:"",s={service:"...",source:"",source_lang:{alpha3:"auto",id:"auto",alpha2:"auto",alpha3b:void 0,alpha3t:void 0,extra:{scope:"individual",type:"living"},foreign:{albanian:"Automatik",malay:"Automatik",azerbaijani:"Avtomatik",uzbek:"Avtomatik",bosnian:"Automatski",croatian:"Automatski",czech:"Automatick\xfd",slovak:"Automatick\xfd",danish:"Automatisk",norwegian:"Automatisk",swedish:"Automatisk",dutch:"Automatisch",german:"Automatisch",haitian:"Otomatik",turkish:"Otomatik",hindi:"स्वचालित",nepali:"स्वचालित",indonesian:"Otomatis",javanese:"Otomatis",sundanese:"Otomatis",persian:"خودکار",urdu:"خودکار",portuguese:"Autom\xe1tica",spanish:"Autom\xe1tica",afrikaans:"Outomatiese",amharic:"አውቶማቲክ",arabic:"تلقائي",armenian:"Ավտոմատ",basque:"Automatiko",belarusian:"Аўтаматычны",bengali:"স্বয়ংক্রিয়",bulgarian:"Автоматичен",burmese:"အလိုအလျောက်",catalan:"Autom\xe0tica",chinese:"自动",esperanto:"Aŭtomata",estonian:"Automaatne",finnish:"Automaattinen",french:"Automatique",galician:"Autom\xe1tico",georgian:"ავტომატური",gujarati:"સ્વચાલિત",hebrew:"אוֹטוֹמָטִי",hungarian:"Automatikus",icelandic:"Sj\xe1lfvirkt",irish:"Uathoibr\xedoch",italian:"Automatico",japanese:"自動",kannada:"ಸ್ವಯಂಚಾಲಿತ",kazakh:"Автоматты",khmer:"ដោយស្វ័យប្រវត្តិ",kirghiz:"Автоматтык",korean:"자동적 인",lao:"ອັດຕະໂນມັດ",latin:"Automatic",latvian:"Automātiska",lithuanian:"Automatinis",luxembourgish:"Automatesch",macedonian:"Автоматски",malagasy:"Mandeha Ho Azy",maltese:"Awtomatiku",maori:"Aunoa",marathi:"स्वयंचलित",moderngreek:"Αυτόματο",mongolian:"Автомат",panjabi:"ਆਟੋਮੈਟਿਕ",polish:"Automatyczny",romanian:"Automat",russian:"Автоматический",scottishgaelic:"F\xe8in-Ghluasadach",serbian:"Аутоматски",sinhala:"ස්වයංක්‍රීය",slovenian:"Samodejno",swahili:"Moja Kwa Moja",tagalog:"Awtomatiko",tajik:"Худкор",tamil:"தானியங்கி",telugu:"ఆటోమేటిక్",thai:"อัตโนมัติ",ukrainian:"Автоматичний",vietnamese:"Tự Động",welsh:"Awtomatig",xhosa:"Ngokuzenzekelayo",yiddish:"אויטאָמאַטיש",zulu:"Okuzenzakalelayo"},name:"Automatic"},dest_lang:{alpha3:"eng",id:"eng",alpha3b:"eng",alpha3t:"eng",alpha2:"en",extra:{scope:"individual",type:"living"},foreign:{afrikaans:"Engels",dutch:"Engels",bosnian:"Engleski",croatian:"Engleski",czech:"Angličtina",slovak:"Angličtina",danish:"Engelsk",norwegian:"Engelsk",swedish:"Engelsk",indonesian:"Inggris",javanese:"Inggris",sundanese:"Inggris",albanian:"Anglisht",amharic:"እንግሊዝኛ",arabic:"الإنجليزية",armenian:"Անգլերեն",azerbaijani:"Ingilis",basque:"Ingelesez",belarusian:"Англійская",bengali:"ইংরেজি",bulgarian:"Английски",burmese:"အင်္ဂလိပ်",catalan:"Angl\xe8s",chinese:"英语",esperanto:"Angla",estonian:"Inglise",finnish:"Englanti",french:"Anglaise",galician:"Ingl\xe9s",georgian:"ინგლისური",german:"Englisch",gujarati:"અંગ્રેજી",haitian:"Angl\xe8",hebrew:"אנגלית",hindi:"अंग्रेज़ी",hungarian:"Angol",icelandic:"Enska",irish:"B\xe9arla",italian:"Inglese",japanese:"英語",kannada:"ಆಂಗ್ಲ",kazakh:"Қазақша",khmer:"ភាសាអង់គ្លេស",kirghiz:"Англисче",korean:"영어",lao:"ອັງກິດ",latin:"Anglicus",latvian:"Angļu",lithuanian:"Anglų",luxembourgish:"Englesch",macedonian:"Англиски",malagasy:"Anglisy",malay:"Bahasa Inggeris",maltese:"Bl-Ingliż",maori:"Ingarihi",marathi:"इंग्रजी",moderngreek:"Αγγλικά",mongolian:"Англи Хэл",nepali:"अंग्रेजी",panjabi:"ਅੰਗਰੇਜ਼ੀ",persian:"انګلیسي...",polish:"Język Angielski",portuguese:"Ingl\xeas",romanian:"Engleză",russian:"Английский",scottishgaelic:"Sasannach",serbian:"Енглески Језик",sinhala:"ඉංග්රීසි",slovenian:"Angleščina",spanish:"Inglesa",swahili:"Kiingereza",tagalog:"Ingles",tajik:"Англисӣ",tamil:"ஆங்கிலம்",telugu:"ఆంగ్ల",thai:"อังกฤษ",turkish:"Ingilizce",ukrainian:"Англійська",urdu:"انگریزی",uzbek:"Inglizcha",vietnamese:"Tiếng Anh",welsh:"Saesneg",xhosa:"Isingesi",yiddish:"ענגליש",zulu:"Isingisi"},name:"English"},translation:"",default:!0};var i=t(1875),l=t(9314),o=t(2845),r=t(7609),c=t(3991);let CopyIcon=e=>(0,n.jsx)(c.vUr,{...e}),u={Google:"https://translate.google.com",Yandex:"https://translate.yandex.com","Microsoft Translate":"https://translator.microsoft.com",Reverso:"https://www.reverso.net/text-translation","Microsoft Bing":"https://www.bing.com/translator",Libre:"https://libretranslate.com","Translate.com":"https://www.translate.com",MyMemory:"https://mymemory.translated.net",DeepL:"https://www.deepl.com/translator"};let Service=class Service{constructor(e){this.name=e;let a=u[e];this.link=a||""}};var g=t(6972);let ServiceElement=e=>{let{service:a}=e,{strings:t}=(0,g.ZK)();return(0,n.jsx)("div",{onClick:e=>e.stopPropagation(),children:a?(0,n.jsx)("a",{href:a.link,color:"primary",rel:"noreferrer",target:"_blank",children:a.name}):(0,n.jsx)("span",{children:t.labels.source})})};var d=t(7294);let TextToSpeechIcon=e=>(0,n.jsx)(c.d2K,{...e});var h=t(498),m=t(1104).lW;let TextToSpeechButton=e=>{let{text:a,source_lang:t,...s}=e,[i,l]=(0,d.useState)(!1),[o,r]=(0,d.useState)(void 0);return(0,d.useEffect)(()=>{o&&o.play()},[o]),(0,d.useEffect)(()=>{i&&((0,h.W)("/tts",{params:{text:a,lang:t.id}}).then(e=>{if(!e.success)return;let a=m.from(e.data.result,"base64"),t=new Blob([a]);r(new Audio(URL.createObjectURL(t)))}),l(!1))},[i]),(0,n.jsx)("button",{className:"opacity-70 hover:opacity-100 transition active:scale-95",onClick:e=>{l(!0),e.stopPropagation()},children:(0,n.jsx)(TextToSpeechIcon,{})})};var x=t(4184),p=t.n(x);let SubResultLoader=e=>(0,n.jsx)(i.w,{isPressable:!0,className:"p-2 mx-1 min-w-[200px] flex-grow",children:(0,n.jsx)(l.G,{className:"p-3",children:(0,n.jsxs)(r.ZP,{speed:2,height:70,viewBox:"0 0 320 70",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",...e,children:[(0,n.jsx)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:180+100*Math.random(),height:"20"}),(0,n.jsx)("rect",{x:"0",y:"50",rx:"3",ry:"3",width:80+50*Math.random(),height:"20"})]})})}),SubResult=e=>{let{result:a,onCopyNotification:t,...s}=e,{strings:r}=(0,g.ZK)(),[c,u]=(0,d.useState)(!1),h=new Service(a?a.service:"");return(0,n.jsxs)(i.w,{isPressable:!!a,className:p()({"opacity-100":a,"opacity-50":!a},"p-2 mx-1 min-w-[200px] flex-grow"),allowTextSelectionOnPress:!0,children:[(0,n.jsx)(l.G,{className:p()({"h-max":c,"max-h-[7.5rem]":!c},"p-3"),onClick:()=>{u(e=>!e)},children:a?a.translation:r.labels.translationFailure}),(0,n.jsxs)(o.i,{className:"flex-start z-[2]",children:[(0,n.jsx)(ServiceElement,{service:h}),a?(0,n.jsxs)("div",{className:"ml-auto flex flex-row space-x-2",children:[(0,n.jsx)(TextToSpeechButton,{text:a.translation,source_lang:a.dest_lang}),(0,n.jsx)(CopyIcon,{onClick:e=>{navigator.clipboard.writeText(a.translation),t&&t(),e.stopPropagation()},className:"opacity-70 hover:opacity-100 transition active:scale-95 cursor-pointer"})]}):""]})]})};var f=t(2319);let ClipboardOkIcon=e=>(0,n.jsx)(c.jsG,{...e}),CopyNotification=e=>{let{duration:a}=e,{strings:t}=(0,g.ZK)(),[s,i]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{i(!0),setTimeout(()=>{i(!1)},a?a-1e3:3e3)},[]),(0,n.jsx)("div",{className:"w-screen h-screen fixed flex z-40 justify-center pointer-events-none",children:(0,n.jsxs)("div",{className:p()("fixed text-white p-4 text-lg rounded items-center flex cursor-pointer bg-[#0072F5] transition-all duration-500 space-x-2",{"opacity-100":s,"bottom-4":s,"opacity-0":!s,"-bottom-16":!s}),children:[(0,n.jsx)("span",{children:t.notifications.copied}),(0,n.jsx)(ClipboardOkIcon,{})]})})};var v=t(4862);let EditIcon=e=>(0,n.jsx)(c.TRY,{...e}),LanguageElement=e=>{let{language:a,...t}=e;return(0,n.jsx)("div",{className:"p-3 w-full h-12 bg-white bg-opacity-100 transition hover:bg-slate-50 cursor-pointer group",...t,children:(0,n.jsx)("span",{className:"font-medium text-gray-700 group-hover:text-gray-900",children:"".concat(a.string," (").concat(a.language,")")})})},w={string:"Automatic",similarity:100,language:"auto"},LanguagePicker=e=>{let{text:a,setShowModal:t,setLanguage:s,automatic:i,...l}=e,{strings:o}=(0,g.ZK)(),[r,c]=(0,d.useState)(a),[u,m]=(0,d.useState)([]),[x,p]=(0,d.useState)(w);(0,d.useEffect)(()=>{r&&(0,h.W)("/language/search",{params:{query:r,limit:5}}).then(e=>{e.success&&m(e.data.languages)})},[r]),(0,d.useEffect)(()=>{p({...w})},[i,o]);let setLanguageID=e=>{(0,h.W)("/language/".concat(e)).then(e=>{e.success&&s(e.data)})};return(0,n.jsx)("div",{className:"flex items-center justify-center w-screen h-screen top-0 left-0 fixed z-10 bg-white bg-opacity-80 animate-enter-modal",onClick:()=>{t(!1)},children:(0,n.jsxs)("div",{className:"flex flex-col rounded md:w-1/2 w-3/4 2xl:w-1/3",onClick:e=>{e.stopPropagation()},children:[(0,n.jsx)("input",{autoFocus:!0,value:r,onKeyUp:e=>{("Enter"==e.key||13===e.keyCode)&&(setLanguageID(u[0].language),t(!1))},onChange:e=>c(e.target.value),placeholder:"Type a language...",type:"text",className:"w-full h-10 p-3 outline-none rounded border-[1px] shadow-lg"}),i?(0,n.jsx)("div",{className:"w-full rounded h-full mt-3 overflow-hidden shadow-lg border-[1px]",children:(0,n.jsx)(LanguageElement,{language:x,onClick:()=>{setLanguageID(x.language),t(!1)}})}):"",(0,n.jsx)("div",{className:"w-full rounded h-full mt-3 overflow-hidden shadow-lg border-[1px]",children:u.map((e,a)=>(0,n.jsx)(LanguageElement,{language:e,onClick:()=>{setLanguageID(e.language),t(!1)}},a))})]})})},Loading=()=>(0,n.jsxs)("div",{className:"relative flex",children:[(0,n.jsx)("span",{className:"inline-block h-2 w-2 bg-white rounded-full mx-1 animate-loading-blink"}),(0,n.jsx)("span",{className:"inline-block h-2 w-2 bg-white rounded-full mx-1 animate-loading-blink delay-500"}),(0,n.jsx)("span",{className:"inline-block h-2 w-2 bg-white rounded-full mx-1 animate-loading-blink delay-1000"})]});var j=t(8908);let SourceTextArea=e=>{let{strings:a}=(0,g.ZK)();return(0,n.jsx)(j.Z,{style:{resize:"none"},className:"mt-3 mb-5 w-full outline-none",placeholder:a.placeholders.translationTextArea,minRows:1,...e})};var k=t(9153);let MainResultCard=e=>{let{text:a,language:t,service:s,loading:r,onNewTranslation:c,onCopyNotification:u,spellchecked:m,...x}=e,{strings:f}=(0,g.ZK)(),[w,j]=(0,d.useState)(a),[b,y]=(0,d.useState)(t),[N,A]=(0,d.useState)(!1),[S,E]=(0,d.useState)(void 0),[_,C]=(0,d.useState)(void 0);return(0,d.useEffect)(()=>{s&&t&&(0,h.W)("/transliterate",{params:{text:w,dest_lang:t.id}}).then(e=>{e.success&&e.data.transliteration!=w?C(e.data):C(void 0)}).catch(e=>{C(void 0)})},[w]),(0,d.useEffect)(()=>{if(b&&t&&b.id!=t.id)return c&&c(w,b)},[b]),(0,d.useEffect)(()=>{c&&w!=a&&(clearTimeout(S),E(setTimeout(()=>c(w,b),1e3)))},[w]),(0,d.useEffect)(()=>{j(a)},[a]),(0,d.useEffect)(()=>{y(t)},[t]),(0,n.jsxs)(i.w,{className:p()({"bg-primary text-white":s,"bg-white text-black":!s},"w-auto flex-grow px-2 py-1"),children:[(0,n.jsxs)(v.u,{className:"pb-0",children:[(0,n.jsx)("div",{className:"text-black",children:N&&(0,n.jsx)(LanguagePicker,{automatic:!s,setLanguage:y,setShowModal:A,text:getLanguageName(b,f)})}),(0,n.jsxs)("div",{className:"flex flex-row group w-max cursor-pointer",onClick:e=>{A(!0)},children:[(0,n.jsx)("span",{className:"font-medium text-sm",children:getLanguageName(b,f)}),(0,n.jsx)(EditIcon,{className:"scale-[.7] -mt-[.2rem] transition opacity-50 group-hover:opacity-80"})]})]}),(0,n.jsx)(l.G,{className:"px-3 py-0",children:s?(0,n.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,n.jsx)("p",{className:"mt-3 mb-5",children:w}),r?(0,n.jsx)(Loading,{}):""]}):(0,n.jsx)(SourceTextArea,{value:w,onChange:e=>j(e.target.value)})}),(0,n.jsxs)(o.i,{children:[(0,n.jsxs)("div",{className:"w-10/12 flex flex-row",children:[(0,n.jsx)(ServiceElement,{service:s}),m&&(0,n.jsxs)("div",{className:"opacity-70 flex flex-row",children:["・",(0,n.jsx)("div",{className:"h-5",children:(0,n.jsx)(k.e,{content:f.labels.spellcheckBy.format({service:m.service}),placement:"right",style:{color:"white",width:"100%"},color:"primary",children:(0,n.jsx)("span",{onClick:()=>{j(m.corrected)},className:"italic w-full text-black",children:m.corrected})})})]}),_&&(0,n.jsxs)("div",{className:"opacity-70 flex flex-row",children:["・",(0,n.jsx)("div",{className:"h-5",children:(0,n.jsx)(k.e,{content:f.labels.transliterationBy.format({service:_.service}),placement:"right",style:{color:"white",width:"100%"},color:"primary",children:(0,n.jsx)("span",{className:"italic w-full",children:_.transliteration})})})]})]}),(0,n.jsxs)("div",{className:"ml-auto flex flex-row space-x-2",children:[(0,n.jsx)(TextToSpeechButton,{text:w,source_lang:t}),s?(0,n.jsx)(CopyIcon,{onClick:()=>{navigator.clipboard.writeText(w),u&&u()},className:"opacity-70 hover:opacity-100 transition active:scale-95 cursor-pointer"}):""]})]})]})},MainResult=e=>{let{result:a,onNewTranslation:t,onCopyNotification:s,loading:i,setLoading:l,...o}=e,[r,c]=(0,d.useState)(void 0),u=new Service(a.service);return(0,n.jsxs)("div",{className:"flex lg:flex-row flex-col lg:space-x-10 lg:space-y-0 space-y-5 mb-10 justify-evenly content-stretch flex-wrap",children:[(0,n.jsx)(MainResultCard,{spellchecked:r,onCopyNotification:s,text:a.source,language:a.source_lang,onNewTranslation:(e,n)=>{if(t)return l(!0),(0,h.W)("/spellcheck",{params:{text:e,source_lang:n.id}}).then(a=>{a.success&&a.data.corrected!=e?c(a.data):c(void 0)}).catch(e=>{c(void 0)}),t({text:e,source_lang:n.id,dest_lang:a.dest_lang.id})}}),(0,n.jsx)(MainResultCard,{onCopyNotification:s,loading:i,text:a.translation,language:a.dest_lang,service:u,onNewTranslation:(e,n)=>{if(t)return l(!0),t({text:a.source,source_lang:a.source_lang.id,dest_lang:n.id})}})]})};var b=t(2445);let generateRandomID=e=>{for(var a="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*n));return a};var y=t(1163),translate=()=>{var e;let a;let{strings:t}=(0,g.ZK)(),i=(0,y.useRouter)(),[l,o]=(0,d.useState)(!0),[r,c]=(0,d.useState)(Object.keys(u).length),[m,x]=(0,d.useState)([s]);a=new URLSearchParams(location.search);let[p,v]=(0,d.useState)({text:null!==(e=a.get("text"))&&void 0!==e?e:"",source_lang:a.get("source_lang")||"auto",dest_lang:a.get("dest_lang")||"eng"}),[w,j]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{setTimeout(()=>{if(!w||w!=w)return;let{finalPath:e}=(0,h.P)("/stream",{params:{text:p.text,dest_lang:p.dest_lang,source_lang:p.source_lang}}),a=new EventSource(f.Z.request.host+e);x([{...s,source:p.text}]),o(!0),c(Object.keys(u).length),a.addEventListener("translation",e=>{let a=JSON.parse(e.data);x(e=>(o(!1),[...e.filter(e=>!e.default),a])),c(e=>e-1)}),a.addEventListener("counter",e=>{let a=JSON.parse(e.data);c(a)}),a.onerror=e=>{e.eventPhase===EventSource.CLOSED&&a.close(),c(0)}},200)},[w]),(0,d.useEffect)(()=>{if(!p.text)return;i.push("/translate?text=".concat(encodeURIComponent(p.text),"&source_lang=").concat(encodeURIComponent(p.source_lang),"&dest_lang=").concat(encodeURIComponent(p.dest_lang)),void 0,{shallow:!0});let e=generateRandomID(12);j(e)},[p]);let[k,N]=(0,d.useState)(!1),[A,S]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{k&&(clearTimeout(A),S(setTimeout(()=>{N(!1)},3e3)))},[k]);let showCopyNotificationHandler=()=>{N(!0)};return(0,n.jsxs)("div",{className:"h-full",children:[(0,n.jsx)(b.H,{title:"translation from ".concat(p.source_lang," to ").concat(p.dest_lang),description:"Use multiple services to translate your texts!"}),k&&(0,n.jsx)(CopyNotification,{duration:3e3}),(0,n.jsxs)("div",{className:"sm:p-16 p-5",children:[(0,n.jsx)(MainResult,{loading:l,setLoading:o,onCopyNotification:showCopyNotificationHandler,onNewTranslation:v,result:m?m[0]:s}),(0,n.jsxs)("div",{className:"mx-3 mt-16",children:[(0,n.jsx)("h2",{className:"font-semibold text-xl mb-5",children:t.headings.otherTranslations}),(0,n.jsxs)("div",{className:"flex flex-row flex-wrap w-full justify-start content-around gap-5",children:[m.slice(1).map((e,a)=>(0,n.jsx)(SubResult,{onCopyNotification:showCopyNotificationHandler,result:e},a)),r>0?Array(r).fill(0).map((e,a)=>(0,n.jsx)(SubResultLoader,{},a)):""]})]})]})]})}}},function(e){e.O(0,[461,367,774,888,179],function(){return e(e.s=5524)}),_N_E=e.O()}]);